---
title: "CodeBook.md"
author: "Aurelien Fauvel"
date: "18 septembre 2016"
output: html_document
---


# Description

The script run_analysis.R generates a tidy data set, called tidy_data based on several data files.

# Variable names

Variable names  | Description                            | Class       | Values
--------------- | -------------------------------------- | ----------- | --------------------------------
subject_id      | the identification number of the subject        | Integer     | From 1 to 30
activity_name   | the activity the subject was doing when recorded | Factor     | LAYING, SITTING, STANDING, WALKING, WALKING_DOWNSTAIRS, WALKING_UPSTAIRS
sensor          | the sensor from which the measurement was made  | Factor      | accelerometer, gyroscope
component       | whether the measurement was from the body, or from gravity | Factor | body, gravity
domain          | whether the measurement is linked to a time signal or transformed into a frequency through the Fourier transformation | Factor | frequency, time
dimension       | the axis of the measurement, or if the variable is actually the magnitude (mag) calculated using the euclidian method | Factor | X, Y, Z, mag
signal          | whether the signal is a "Jerk" signal, or the initial one | Factor | jerk, initial
measurement     | mean or standard deviation of the initial measurement | Factor | mean, std
value           | the average of the variable across the original data points | numeric | 



# Main transformation steps

All transformation steps are commented and explained in the R script directly. And the main steps followed are as follows.

## Part 1:

### Reading all necessary files as input using the read.table command
* Generic information, such as features.txt and activity_labels.txt
* Test data information, composed of X_test.txt, y_test.txt and subject_test.txt
* Train data information, composed of X_train.txt, y_train.txt and subject_train.txt

### Naming columns appropriately for all files read
In particular the features names in the X files, using the data frame generated reading the features.txt file

Nota: I have decided to name each data frame generated, thus replicating twice the procedure for both test and train. A more efficient way could be to only name the resulting data frame.

### Creating a complete data set
* First compile the test and train data sets by using the colbind command (once for each test and train data sets)
* Second, compile the complete data set by using the rbind command on test and data sets

## Part 2:

### Identifying which columns to keep in the complete data set
* First, using the grepl command, identify which columns contain either "mean()", "std()", "subject_id" or "activity_id" (those last two are id columns we want to keep)
* Second, subset the complete data set alongside those columns identify in previous step

## Part 3:

### Using descriptive activity labels
* Merge the above data set with the data frame generated by activity_labels.txt using the merge() command

Nota: we will remove the redundant column "activity_id" later on

## Part 4:

### Ensuring the required package (reshape2) is installed and loaded

### Melting the data
* Use the melt command to melt the data frame along the subject, activity, and feature

### Creating new descriptive variable names
This is the most repetitive part of the script, and is made of 3 main sub-steps

* Finds out if the feature name includes certains literal (text), using the grepl command, such as
    + mean() or std()
    + acc or gyro
    + body or gravity
    + t or f (at the beginning of the feature name using the "^")
    + jerk
    + X, Y, Z or mag
* Creates for each of those instances a new variable name, and assigning its descriptive value (resp.)
    + measurement: mean or std
    + sensor: accelerometer or gyroscope
    + component: body or gravity
    + domain: time of frequency
    + signal: jerk or initial (eg not a jerk signal)
    + dimension: X, Y, Z or mag (for magnitude, using the euclidian calculation method)

* Defines the class of those variables as factor, using the as.factor command

### Checking if all variable possibilities are then covered
Using two lines of code, I check if all combinations of these new descriptive variable names cover the initial features

### Finalizing data set
Finalize data set by removing redudant information, and re-ordering columns in a more "logical way"

## Part 5:
Once the previous data set has been "finalized", this last step looks relatively straighforward
* Use the aggregate command to summarize the data, by applying the mean
* Write the, then, tidy data set, into tidydata.txt

